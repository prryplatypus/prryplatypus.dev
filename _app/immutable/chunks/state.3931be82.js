import{w as o}from"./index.d4edf209.js";let s=[];const n=o([]);function u(a){n.update(t=>[...t,a])}function i(a){n.update(t=>t.filter(e=>e.id!==a.id))}function d(){n.update(a=>{const t=[];return a.forEach(e=>{e.start_date===null&&(e.start_date=new Date),t.push(e)}),t})}function c(){n.update(a=>{const t=[],e=new Date().getTime();return a.forEach(r=>{(r.start_date===null||r.start_date.getTime()+r.duration*6e4>e)&&t.push(r)}),t})}function l(a){n.update(t=>{const e=[];return t.forEach(r=>{if(r.id===a.id){e.push(a);return}e.push(r)}),e})}function f(a){let t=null;return s.forEach(e=>{e.id===a&&(t=e)}),t}{const a=window.localStorage.getItem("exams");if(a!==null){const t=JSON.parse(a);t.forEach(e=>{e.start_date&&(e.start_date=new Date(e.start_date))}),s=t,n.set(t)}n.subscribe(t=>{s=t,window.localStorage.setItem("exams",JSON.stringify(t))})}const m={exams_store:n,addExam:u,getExam:f,deleteExam:i,startPendingExams:d,clearExpiredExams:c,updateExam:l};export{m as e};
