import{S as H,i as M,s as V,k as E,q as S,a as P,l as k,m as w,r as A,h as _,c as T,n as p,b as d,H as x,u as J,I as j,g,v as K,f as L,d as b,K as O,y,z as C,A as D,B as I,L as R,J as Q}from"../chunks/index.93dd95e1.js";/* empty css                       */import{B as F}from"../chunks/Button.c75afa70.js";import{e as G}from"../chunks/state.3931be82.js";import{P as U}from"../chunks/PageHead.f30ff5e5.js";function W(o){let e;return{c(){e=S("​")},l(a){e=A(a,"​")},m(a,t){d(a,e,t)},p:j,d(a){a&&_(e)}}}function X(o){let e=o[1].format(new Date(o[0].start_date.getTime()+o[0].duration*6e4))+"",a;return{c(){a=S(e)},l(t){a=A(t,e)},m(t,n){d(t,a,n)},p(t,n){n&1&&e!==(e=t[1].format(new Date(t[0].start_date.getTime()+t[0].duration*6e4))+"")&&J(a,e)},d(t){t&&_(a)}}}function Y(o){let e,a,t,n=o[0].name+"",c,r,i,l;function $(u,s){return u[0].start_date?X:W}let h=$(o),f=h(o);return{c(){e=E("div"),a=E("a"),t=E("h2"),c=S(n),i=P(),l=E("div"),f.c(),this.h()},l(u){e=k(u,"DIV",{class:!0});var s=w(e);a=k(s,"A",{href:!0,class:!0});var m=w(a);t=k(m,"H2",{class:!0});var v=w(t);c=A(v,n),v.forEach(_),m.forEach(_),i=T(s),l=k(s,"DIV",{class:!0});var B=w(l);f.l(B),B.forEach(_),s.forEach(_),this.h()},h(){p(t,"class","exam-name svelte-p21402"),p(a,"href",r="/timer/edit?id="+o[0].id),p(a,"class","svelte-p21402"),p(l,"class","exam-time svelte-p21402"),p(e,"class","exam-card svelte-p21402")},m(u,s){d(u,e,s),x(e,a),x(a,t),x(t,c),x(e,i),x(e,l),f.m(l,null)},p(u,[s]){s&1&&n!==(n=u[0].name+"")&&J(c,n),s&1&&r!==(r="/timer/edit?id="+u[0].id)&&p(a,"href",r),h===(h=$(u))&&f?f.p(u,s):(f.d(1),f=h(u),f&&(f.c(),f.m(l,null)))},i:j,o:j,d(u){u&&_(e),f.d()}}}function Z(o,e,a){let{exam:t}=e;const n=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23"});return o.$$set=c=>{"exam"in c&&a(0,t=c.exam)},[t,n]}class ee extends H{constructor(e){super(),M(this,e,Z,Y,V,{exam:0})}}function N(o,e,a){const t=o.slice();return t[2]=e[a],t}function z(o){let e,a;return e=new ee({props:{exam:o[2]}}),{c(){y(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,n){D(e,t,n),a=!0},p(t,n){const c={};n&2&&(c.exam=t[2]),e.$set(c)},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){b(e.$$.fragment,t),a=!1},d(t){I(e,t)}}}function te(o){let e,a,t=o[1],n=[];for(let r=0;r<t.length;r+=1)n[r]=z(N(o,t,r));const c=r=>b(n[r],1,1,()=>{n[r]=null});return{c(){e=E("main");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){e=k(r,"MAIN",{class:!0});var i=w(e);for(let l=0;l<n.length;l+=1)n[l].l(i);i.forEach(_),this.h()},h(){p(e,"class","svelte-6pidmj")},m(r,i){d(r,e,i);for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(e,null);a=!0},p(r,[i]){if(i&2){t=r[1];let l;for(l=0;l<t.length;l+=1){const $=N(r,t,l);n[l]?(n[l].p($,i),g(n[l],1)):(n[l]=z($),n[l].c(),g(n[l],1),n[l].m(e,null))}for(K(),l=t.length;l<n.length;l+=1)c(l);L()}},i(r){if(!a){for(let i=0;i<t.length;i+=1)g(n[i]);a=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)b(n[i]);a=!1},d(r){r&&_(e),O(n,r)}}}function ae(o,e,a){let t,n=j,c=()=>(n(),n=R(r,i=>a(1,t=i)),r);o.$$.on_destroy.push(()=>n());let{exams:r}=e;return c(),o.$$set=i=>{"exams"in i&&c(a(0,r=i.exams))},[r,t]}class ne extends H{constructor(e){super(),M(this,e,ae,te,V,{exams:0})}}function se(o){let e;return{c(){e=S("Clear expired")},l(a){e=A(a,"Clear expired")},m(a,t){d(a,e,t)},d(a){a&&_(e)}}}function re(o){let e;return{c(){e=S("Start pending")},l(a){e=A(a,"Start pending")},m(a,t){d(a,e,t)},d(a){a&&_(e)}}}function le(o){let e;return{c(){e=S("+")},l(a){e=A(a,"+")},m(a,t){d(a,e,t)},d(a){a&&_(e)}}}function oe(o){let e,a,t,n,c,r,i,l,$,h,f,u;return e=new U({props:{title:"Exams timer - Time multiple exams at once",description:"Manage multiple overlapping exams at once"}}),n=new F({props:{$$slots:{default:[se]},$$scope:{ctx:o}}}),n.$on("click",o[1]),r=new F({props:{$$slots:{default:[re]},$$scope:{ctx:o}}}),r.$on("click",o[2]),$=new F({props:{type:"submit",$$slots:{default:[le]},$$scope:{ctx:o}}}),f=new ne({props:{exams:o[0]}}),{c(){y(e.$$.fragment),a=P(),t=E("nav"),y(n.$$.fragment),c=P(),y(r.$$.fragment),i=P(),l=E("form"),y($.$$.fragment),h=P(),y(f.$$.fragment),this.h()},l(s){C(e.$$.fragment,s),a=T(s),t=k(s,"NAV",{class:!0});var m=w(t);C(n.$$.fragment,m),c=T(m),C(r.$$.fragment,m),i=T(m),l=k(m,"FORM",{action:!0,class:!0});var v=w(l);C($.$$.fragment,v),v.forEach(_),m.forEach(_),h=T(s),C(f.$$.fragment,s),this.h()},h(){p(l,"action","/timer/create"),p(l,"class","svelte-1u3j4hx"),p(t,"class","svelte-1u3j4hx")},m(s,m){D(e,s,m),d(s,a,m),d(s,t,m),D(n,t,null),x(t,c),D(r,t,null),x(t,i),x(t,l),D($,l,null),d(s,h,m),D(f,s,m),u=!0},p(s,[m]){const v={};m&8&&(v.$$scope={dirty:m,ctx:s}),n.$set(v);const B={};m&8&&(B.$$scope={dirty:m,ctx:s}),r.$set(B);const q={};m&8&&(q.$$scope={dirty:m,ctx:s}),$.$set(q)},i(s){u||(g(e.$$.fragment,s),g(n.$$.fragment,s),g(r.$$.fragment,s),g($.$$.fragment,s),g(f.$$.fragment,s),u=!0)},o(s){b(e.$$.fragment,s),b(n.$$.fragment,s),b(r.$$.fragment,s),b($.$$.fragment,s),b(f.$$.fragment,s),u=!1},d(s){I(e,s),s&&_(a),s&&_(t),I(n),I(r),I($),s&&_(h),I(f,s)}}}function ie(o){Q("exam_state",G);const{exams_store:e,clearExpiredExams:a,startPendingExams:t}=G;return[e,a,t]}class $e extends H{constructor(e){super(),M(this,e,ie,oe,V,{})}}export{$e as component};
