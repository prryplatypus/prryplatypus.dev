import{S as G,i as T,s as j,k as g,q as k,a as C,l as v,m as x,r as y,h as f,c as w,n as h,b as p,G as $,u as O,H as B,g as b,v as P,f as V,d as E,M as J,y as D,z as I,A as S,B as A,N as K,J as L,O as Q}from"../chunks/index.9b364cbc.js";import{B as F}from"../chunks/Button.349ce5de.js";function R(l){let e;return{c(){e=k("​")},l(a){e=y(a,"​")},m(a,t){p(a,e,t)},p:B,d(a){a&&f(e)}}}function U(l){let e=l[1].format(new Date(l[0].start_date.getTime()+l[0].duration*6e4))+"",a;return{c(){a=k(e)},l(t){a=y(t,e)},m(t,c){p(t,a,c)},p(t,c){c&1&&e!==(e=t[1].format(new Date(t[0].start_date.getTime()+t[0].duration*6e4))+"")&&O(a,e)},d(t){t&&f(a)}}}function W(l){let e,a,t,c=l[0].name+"",i,u,r,_;function s(m,d){return m[0].start_date?U:R}let o=s(l),n=o(l);return{c(){e=g("div"),a=g("a"),t=g("h2"),i=k(c),r=C(),_=g("div"),n.c(),this.h()},l(m){e=v(m,"DIV",{class:!0});var d=x(e);a=v(d,"A",{href:!0,class:!0});var q=x(a);t=v(q,"H2",{class:!0});var N=x(t);i=y(N,c),N.forEach(f),q.forEach(f),r=w(d),_=v(d,"DIV",{class:!0});var z=x(_);n.l(z),z.forEach(f),d.forEach(f),this.h()},h(){h(t,"class","exam-name svelte-1xk5ayv"),h(a,"href",u="/timer/exams/edit?id="+l[0].id),h(a,"class","svelte-1xk5ayv"),h(_,"class","exam-time svelte-1xk5ayv"),h(e,"class","exam-card svelte-1xk5ayv")},m(m,d){p(m,e,d),$(e,a),$(a,t),$(t,i),$(e,r),$(e,_),n.m(_,null)},p(m,[d]){d&1&&c!==(c=m[0].name+"")&&O(i,c),d&1&&u!==(u="/timer/exams/edit?id="+m[0].id)&&h(a,"href",u),o===(o=s(m))&&n?n.p(m,d):(n.d(1),n=o(m),n&&(n.c(),n.m(_,null)))},i:B,o:B,d(m){m&&f(e),n.d()}}}function X(l,e,a){let{exam:t}=e;const c=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23"});return l.$$set=i=>{"exam"in i&&a(0,t=i.exam)},[t,c]}class Y extends G{constructor(e){super(),T(this,e,X,W,j,{exam:0})}}function H(l,e,a){const t=l.slice();return t[2]=e[a],t}function M(l){let e,a;return e=new Y({props:{exam:l[2],class:"exam"}}),{c(){D(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,c){S(e,t,c),a=!0},p(t,c){const i={};c&2&&(i.exam=t[2]),e.$set(i)},i(t){a||(b(e.$$.fragment,t),a=!0)},o(t){E(e.$$.fragment,t),a=!1},d(t){A(e,t)}}}function Z(l){let e,a,t,c,i,u=l[1],r=[];for(let s=0;s<u.length;s+=1)r[s]=M(H(l,u,s));const _=s=>E(r[s],1,1,()=>{r[s]=null});return{c(){e=g("main");for(let s=0;s<r.length;s+=1)r[s].c();a=C(),t=g("a"),c=k("+"),this.h()},l(s){e=v(s,"MAIN",{class:!0});var o=x(e);for(let m=0;m<r.length;m+=1)r[m].l(o);a=w(o),t=v(o,"A",{class:!0,href:!0});var n=x(t);c=y(n,"+"),n.forEach(f),o.forEach(f),this.h()},h(){h(t,"class","exam add svelte-1liioju"),h(t,"href","/timer/exams/create"),h(e,"class","svelte-1liioju")},m(s,o){p(s,e,o);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(e,null);$(e,a),$(e,t),$(t,c),i=!0},p(s,[o]){if(o&2){u=s[1];let n;for(n=0;n<u.length;n+=1){const m=H(s,u,n);r[n]?(r[n].p(m,o),b(r[n],1)):(r[n]=M(m),r[n].c(),b(r[n],1),r[n].m(e,a))}for(P(),n=u.length;n<r.length;n+=1)_(n);V()}},i(s){if(!i){for(let o=0;o<u.length;o+=1)b(r[o]);i=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)E(r[o]);i=!1},d(s){s&&f(e),J(r,s)}}}function ee(l,e,a){let t,c=B,i=()=>(c(),c=K(u,r=>a(1,t=r)),u);l.$$.on_destroy.push(()=>c());let{exams:u}=e;return i(),l.$$set=r=>{"exams"in r&&i(a(0,u=r.exams))},[u,t]}class te extends G{constructor(e){super(),T(this,e,ee,Z,j,{exams:0})}}function ae(l){let e;return{c(){e=k("Clear expired")},l(a){e=y(a,"Clear expired")},m(a,t){p(a,e,t)},d(a){a&&f(e)}}}function se(l){let e;return{c(){e=k("Start pending")},l(a){e=y(a,"Start pending")},m(a,t){p(a,e,t)},d(a){a&&f(e)}}}function ne(l){let e,a,t,c,i,u,r,_;return t=new F({props:{$$slots:{default:[ae]},$$scope:{ctx:l}}}),t.$on("click",l[1]),i=new F({props:{$$slots:{default:[se]},$$scope:{ctx:l}}}),i.$on("click",l[2]),r=new te({props:{exams:l[0]}}),{c(){e=C(),a=g("section"),D(t.$$.fragment),c=C(),D(i.$$.fragment),u=C(),D(r.$$.fragment),this.h()},l(s){L("svelte-1q8sj7g",document.head).forEach(f),e=w(s),a=v(s,"SECTION",{class:!0});var n=x(a);I(t.$$.fragment,n),c=w(n),I(i.$$.fragment,n),n.forEach(f),u=w(s),I(r.$$.fragment,s),this.h()},h(){document.title="Exams timer - Good luck!",h(a,"class","buttons svelte-1m1zcdh")},m(s,o){p(s,e,o),p(s,a,o),S(t,a,null),$(a,c),S(i,a,null),p(s,u,o),S(r,s,o),_=!0},p(s,[o]){const n={};o&8&&(n.$$scope={dirty:o,ctx:s}),t.$set(n);const m={};o&8&&(m.$$scope={dirty:o,ctx:s}),i.$set(m)},i(s){_||(b(t.$$.fragment,s),b(i.$$.fragment,s),b(r.$$.fragment,s),_=!0)},o(s){E(t.$$.fragment,s),E(i.$$.fragment,s),E(r.$$.fragment,s),_=!1},d(s){s&&f(e),s&&f(a),A(t),A(i),s&&f(u),A(r,s)}}}function re(l){const{exams_store:e,clearExpiredExams:a,startPendingExams:t}=Q("exam_state");return[e,a,t]}class ie extends G{constructor(e){super(),T(this,e,re,ne,j,{})}}export{ie as component};
