import{S as A,i as B,s as G,k as v,q as E,a as M,l as x,m as b,r as y,h as _,c as S,n as $,b as p,I as h,u as P,J as T,g,v as V,f as H,d as k,M as J,y as w,z as C,A as I,B as D,N as K,G as L,O as Q}from"../chunks/index.c21ce127.js";import{B as z}from"../chunks/Button.d9b2ef35.js";import{M as R}from"../chunks/MetaTags.aba56d88.js";function U(l){let e;return{c(){e=E("​")},l(a){e=y(a,"​")},m(a,t){p(a,e,t)},p:T,d(a){a&&_(e)}}}function W(l){let e=l[1].format(new Date(l[0].start_date.getTime()+l[0].duration*6e4))+"",a;return{c(){a=E(e)},l(t){a=y(t,e)},m(t,o){p(t,a,o)},p(t,o){o&1&&e!==(e=t[1].format(new Date(t[0].start_date.getTime()+t[0].duration*6e4))+"")&&P(a,e)},d(t){t&&_(a)}}}function X(l){let e,a,t,o=l[0].name+"",f,m,r,u;function i(c,d){return c[0].start_date?W:U}let s=i(l),n=s(l);return{c(){e=v("div"),a=v("a"),t=v("h2"),f=E(o),r=M(),u=v("div"),n.c(),this.h()},l(c){e=x(c,"DIV",{class:!0});var d=b(e);a=x(d,"A",{href:!0,class:!0});var N=b(a);t=x(N,"H2",{class:!0});var j=b(t);f=y(j,o),j.forEach(_),N.forEach(_),r=S(d),u=x(d,"DIV",{class:!0});var q=b(u);n.l(q),q.forEach(_),d.forEach(_),this.h()},h(){$(t,"class","exam-name svelte-1xk5ayv"),$(a,"href",m="/timer/exams/edit?id="+l[0].id),$(a,"class","svelte-1xk5ayv"),$(u,"class","exam-time svelte-1xk5ayv"),$(e,"class","exam-card svelte-1xk5ayv")},m(c,d){p(c,e,d),h(e,a),h(a,t),h(t,f),h(e,r),h(e,u),n.m(u,null)},p(c,[d]){d&1&&o!==(o=c[0].name+"")&&P(f,o),d&1&&m!==(m="/timer/exams/edit?id="+c[0].id)&&$(a,"href",m),s===(s=i(c))&&n?n.p(c,d):(n.d(1),n=s(c),n&&(n.c(),n.m(u,null)))},i:T,o:T,d(c){c&&_(e),n.d()}}}function Y(l,e,a){let{exam:t}=e;const o=new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h23"});return l.$$set=f=>{"exam"in f&&a(0,t=f.exam)},[t,o]}class Z extends A{constructor(e){super(),B(this,e,Y,X,G,{exam:0})}}function F(l,e,a){const t=l.slice();return t[2]=e[a],t}function O(l){let e,a;return e=new Z({props:{exam:l[2],class:"exam"}}),{c(){w(e.$$.fragment)},l(t){C(e.$$.fragment,t)},m(t,o){I(e,t,o),a=!0},p(t,o){const f={};o&2&&(f.exam=t[2]),e.$set(f)},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){k(e.$$.fragment,t),a=!1},d(t){D(e,t)}}}function ee(l){let e,a,t,o,f,m=l[1],r=[];for(let i=0;i<m.length;i+=1)r[i]=O(F(l,m,i));const u=i=>k(r[i],1,1,()=>{r[i]=null});return{c(){e=v("main");for(let i=0;i<r.length;i+=1)r[i].c();a=M(),t=v("a"),o=E("+"),this.h()},l(i){e=x(i,"MAIN",{class:!0});var s=b(e);for(let c=0;c<r.length;c+=1)r[c].l(s);a=S(s),t=x(s,"A",{class:!0,href:!0});var n=b(t);o=y(n,"+"),n.forEach(_),s.forEach(_),this.h()},h(){$(t,"class","exam add svelte-1liioju"),$(t,"href","/timer/exams/create"),$(e,"class","svelte-1liioju")},m(i,s){p(i,e,s);for(let n=0;n<r.length;n+=1)r[n]&&r[n].m(e,null);h(e,a),h(e,t),h(t,o),f=!0},p(i,[s]){if(s&2){m=i[1];let n;for(n=0;n<m.length;n+=1){const c=F(i,m,n);r[n]?(r[n].p(c,s),g(r[n],1)):(r[n]=O(c),r[n].c(),g(r[n],1),r[n].m(e,a))}for(V(),n=m.length;n<r.length;n+=1)u(n);H()}},i(i){if(!f){for(let s=0;s<m.length;s+=1)g(r[s]);f=!0}},o(i){r=r.filter(Boolean);for(let s=0;s<r.length;s+=1)k(r[s]);f=!1},d(i){i&&_(e),J(r,i)}}}function te(l,e,a){let t,o=T,f=()=>(o(),o=K(m,r=>a(1,t=r)),m);l.$$.on_destroy.push(()=>o());let{exams:m}=e;return f(),l.$$set=r=>{"exams"in r&&f(a(0,m=r.exams))},[m,t]}class ae extends A{constructor(e){super(),B(this,e,te,ee,G,{exams:0})}}function se(l){let e;return{c(){e=E("Clear expired")},l(a){e=y(a,"Clear expired")},m(a,t){p(a,e,t)},d(a){a&&_(e)}}}function ne(l){let e;return{c(){e=E("Start pending")},l(a){e=y(a,"Start pending")},m(a,t){p(a,e,t)},d(a){a&&_(e)}}}function re(l){let e,a,t,o,f,m,r,u,i;return e=new R({props:{title:"Exams timer - Good luck!",description:"Manage multiple overlapping exams at once"}}),o=new z({props:{$$slots:{default:[se]},$$scope:{ctx:l}}}),o.$on("click",l[1]),m=new z({props:{$$slots:{default:[ne]},$$scope:{ctx:l}}}),m.$on("click",l[2]),u=new ae({props:{exams:l[0]}}),{c(){w(e.$$.fragment),a=M(),t=v("section"),w(o.$$.fragment),f=M(),w(m.$$.fragment),r=M(),w(u.$$.fragment),this.h()},l(s){const n=L("svelte-kruagk",document.head);C(e.$$.fragment,n),n.forEach(_),a=S(s),t=x(s,"SECTION",{class:!0});var c=b(t);C(o.$$.fragment,c),f=S(c),C(m.$$.fragment,c),c.forEach(_),r=S(s),C(u.$$.fragment,s),this.h()},h(){$(t,"class","buttons svelte-1m1zcdh")},m(s,n){I(e,document.head,null),p(s,a,n),p(s,t,n),I(o,t,null),h(t,f),I(m,t,null),p(s,r,n),I(u,s,n),i=!0},p(s,[n]){const c={};n&8&&(c.$$scope={dirty:n,ctx:s}),o.$set(c);const d={};n&8&&(d.$$scope={dirty:n,ctx:s}),m.$set(d)},i(s){i||(g(e.$$.fragment,s),g(o.$$.fragment,s),g(m.$$.fragment,s),g(u.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),k(o.$$.fragment,s),k(m.$$.fragment,s),k(u.$$.fragment,s),i=!1},d(s){D(e),s&&_(a),s&&_(t),D(o),D(m),s&&_(r),D(u,s)}}}function le(l){const{exams_store:e,clearExpiredExams:a,startPendingExams:t}=Q("exam_state");return[e,a,t]}class me extends A{constructor(e){super(),B(this,e,le,re,G,{})}}export{me as component};
